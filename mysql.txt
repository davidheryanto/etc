# Erorr: MySql server has gone away
# http://stackoverflow.com/questions/12425287/mysql-server-has-gone-away-when-importing-large-sql-file
# Modify my.ini
SET GLOBAL max_allowed_packet=1024M;

# Set sql_mode to ansi, more cross platform, eg use ' instead of `
# http://dba.stackexchange.com/questions/23129/benefits-of-using-backtick-in-mysql-queries
SET sql_mode = 'ANSI_QUOTES';

# Simple wordpress setup
# http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/hosting-wordpress.html
mysql -u root -p
create user wordpress_user@localhost identified by 'password';
create database wordpress;
grant all privileges on wordpress.* to wordpress_user@localhost;
flush privileges;

# Select column name
SELECT `COLUMN_NAME` 
FROM `INFORMATION_SCHEMA`.`COLUMNS` 
WHERE `TABLE_SCHEMA`='yourdatabasename' 
    AND `TABLE_NAME`='yourtablename';

# Python driver
# Need to install -devel library first
pip install MySQL-python 
import MySQLdb
connection = MySQLdb.connect(host='localhost', user='root', passwd='mypassword', db='mydatabase')

# Sqlalchemy example
# Connection string
mysql+mysqldb://<user>:<password>@<host>[:<port>]/<dbname>

engine = create_engine(connection_string)
Session = sessionmaker(bind=engine)
session = Session()

Base = declarative_base()
class User(Base):
    __tablename__ = 'user'
    
    id = Column(Integer, primary_key=True)
    name = Column(String(50))
    password = Column(String(50))
    
    def __repr__(self):
        return '{},{}'.format(self.name,self.password)

Base.metadata.create_all(engine)
user = User(name='david', password='password')
session.add(user)
session.commit()
session.query(User).all()

# Show table info
SHOW CREATE TABLE <table_name>

# Backup database with mysqldump
# http://stackoverflow.com/questions/13484667/downloading-mysql-dump-from-command-line
$ mysqldump -u [uname] -p db_name > db_backup.sql
$ mysqldump -u [uname] -p db_name | gzip > db_backup.sql.gz

# Change buffer pool size to 70% VM memory for better performance (my.cnf)
innodb_buffer_pool_size=1G
# Change from command line
SELECT @@innodb_buffer_pool_size;
SET GLOBAL innodb_buffer_pool_size=4026531840;