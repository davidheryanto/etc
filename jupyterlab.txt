# Set environment variables for notebook via kernel.json
# https://stackoverflow.com/a/53595397/3949303
jupyter kernelspec list # Check kernel directory
# Edit kernel.json file in the directory e.g.
{
  "argv": [
    "python",
    "-m",
    "ipykernel_launcher",
    "-f",
    "{connection_file}"
  ],
  "display_name": "Python 3 (ipykernel)",
  "language": "python",
  "metadata": {
    "debugger": true
  },
  "env": {
    "APP_URL": "http://localhost:8080",
    "APP_API_KEY": "mysecretapp",
    "LD_LIBRARY_PATH": "/additional/path:$LD_LIBRARY_PATH"
  }
}


# Update extensions
jupyter labextension update --all

# Example settings: Settings > Advanced Settings Editor > Notebook
{
    "codeCellConfig": {
        "fontFamily":"SF Mono",
        "fontSize": 14
    },
    "recordTiming": true,
    "maxNumberOutputs": 2500
}

# ============================================================
# Extensions
# ============================================================

# Table of Content
jupyter labextension install @jupyterlab/toc

# Git
pip install --upgrade jupyterlab jupyterlab-git
jupyter lab build

# Show cell execution time
pip install jupyterlab_execute_time

# Enable in Settings > Advanced Settings Editor > Notebook
{"recordTiming": true}

# Sublime, Ctrl+D shortcut to multi select similar text is useful
# https://github.com/ryantam626/jupyterlab_sublime
pip install jupyterlab_sublime

# Code formatter: https://jupyterlab-code-formatter.readthedocs.io/
pip install jupyterlab_code_formatter
pip install black isort

# Git: install dev version if stable version failed
pip install --upgrade --pre jupyterlab-git

# Variable Inspector: https://github.com/lckr/jupyterlab-variableInspector
jupyter labextension install @lckr/jupyterlab_variableinspector

# Resource monitor: https://github.com/jtpio/jupyterlab-system-monitor
pip install jupyterlab-system-monitor

# Edit config ~/.jupyter/jupyter_notebook_config.py
c.ResourceUseDisplay.mem_limit = <size_in_GB> *1024*1024*1024
c.ResourceUseDisplay.track_cpu_percent = True
c.ResourceUseDisplay.cpu_limit = <number_of_cpus>

# ============================================================

# Genereate user config file: $HOME/.jupyter/jupyter_lab_config.py
jupyter-lab --generate-config

# Example jupyter_lab_config.py
c.ServerApp.token = ""
c.ExtensionApp.open_browser = False
